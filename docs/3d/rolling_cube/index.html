<!doctype html><html lang=en class="js csstransforms3d"><head><meta charset=utf-8><meta name=description content="Gamedev lessons for Godot Engine."><meta name=keywords content="gamedev,programming,game development,coding,gdscript,game design"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=generator content="Hugo 0.68.3"><meta name=description content><link rel=icon href=/godot_recipes/images/favicon.png type=image/png><title>Rolling Cube :: Godot Recipes</title><link href=/godot_recipes/css/gd-icon-font.css?1626134633 rel=stylesheet><link href=/godot_recipes/css/nucleus.css?1626134633 rel=stylesheet><link href=/godot_recipes/css/fontawesome-all.min.css?1626134633 rel=stylesheet><link href=/godot_recipes/css/hybrid.css?1626134633 rel=stylesheet><link href=/godot_recipes/css/featherlight.min.css?1626134633 rel=stylesheet><link href=/godot_recipes/css/perfect-scrollbar.min.css?1626134633 rel=stylesheet><link href=/godot_recipes/css/auto-complete.css?1626134633 rel=stylesheet><link href=/godot_recipes/css/atom-one-dark-reasonable.css?1626134633 rel=stylesheet><link href=/godot_recipes/css/theme.css?1626134633 rel=stylesheet><link href=/godot_recipes/css/hugo-theme.css?1626134633 rel=stylesheet><link href=/godot_recipes/css/theme-green.css?1626134633 rel=stylesheet><script src=/godot_recipes/js/jquery-3.3.1.min.js?1626134633></script><style type=text/css>:root #header+#content>#left>#rlblock_left{display:none!important}:not(pre)>code+span.copy-to-clipboard{display:none}</style><link href="https://fonts.googleapis.com/css?family=Work+Sans:300,400,500" rel=stylesheet><style type=text/css>pre code{white-space:pre}</style></head><body data-url=/godot_recipes/3d/rolling_cube/><nav id=sidebar><div id=header-wrapper><div id=header><a href=http://godotrecipes.com><div class=mylogo>Godot Recipes</div></a><img src=/godot_recipes/images/kcc_logo_square.png></div><a href=https://www.patreon.com/kidscancode><img src=/godot_recipes/img/become_a_patron_button.png></a><div class=searchbox><label for=search-by><i class="fas fa-search"></i></label><input data-search-input id=search-by type=search placeholder=Search...>
<span data-search-clear><i class="fas fa-times"></i></span></div><script type=text/javascript src=/godot_recipes/js/lunr.min.js?1626134633></script><script type=text/javascript src=/godot_recipes/js/auto-complete.js?1626134633></script><script type=text/javascript>var baseurl="https:\/\/kidscancode.org\/godot_recipes\/";</script><script type=text/javascript src=/godot_recipes/js/search.js?1626134633></script></div><div class=highlightable><ul class=topics><li data-nav-id=/godot_recipes/recent/ title="Fresh Recipes" class=dd-item><a href=/godot_recipes/recent/><i class="fas fa-newspaper fa-fw"></i>&nbspFresh Recipes
          
  </a></li><li data-nav-id=/godot_recipes/g101/ title="Godot 101" class=dd-item><a href=/godot_recipes/g101/><i class="fas fa-graduation-cap fa-fw"></i>&nbspGodot 101
          
     </a><ul><li data-nav-id=/godot_recipes/g101/start/ title="Getting Started" class=dd-item><a href=/godot_recipes/g101/start/><i class="fas fa-feather-alt fa-fw"></i>&nbspGetting Started
          
</a><ul><li data-nav-id=/godot_recipes/g101/start/101_01/ title="What is Godot?" class=dd-item><a href=/godot_recipes/g101/start/101_01/>01. What is Godot?</a></li><li data-nav-id=/godot_recipes/g101/start/101_02/ title="Godot's Editor: Finding your way around" class=dd-item><a href=/godot_recipes/g101/start/101_02/>02. The Godot Editor</a></li><li data-nav-id=/godot_recipes/g101/start/101_03/ title="Nodes: Godot's building blocks" class=dd-item><a href=/godot_recipes/g101/start/101_03/>03. Nodes</a></li></ul></li><li data-nav-id=/godot_recipes/g101/gdscript/ title=GDScript class=dd-item><a href=/godot_recipes/g101/gdscript/><i class="fas fa-scroll fa-fw"></i>&nbspGDScript
          
     </a><ul><li data-nav-id=/godot_recipes/g101/gdscript/gdscript_start/ title="GDScript: Getting started" class=dd-item><a href=/godot_recipes/g101/gdscript/gdscript_start/>GDScript: Getting started</a></li></ul></li><li data-nav-id=/godot_recipes/g101/3d/ title="Intro to 3D" class=dd-item><a href=/godot_recipes/g101/3d/><i class="fas fa-cube fa-fw"></i>&nbspIntro to 3D
          
    </a><ul><li data-nav-id=/godot_recipes/g101/3d/101_3d_01/ title="The 3D Editor" class=dd-item><a href=/godot_recipes/g101/3d/101_3d_01/>01. The 3D Editor</a></li><li data-nav-id=/godot_recipes/g101/3d/101_3d_02/ title="Importing 3D Objects" class=dd-item><a href=/godot_recipes/g101/3d/101_3d_02/>02. Importing 3D Objects</a></li><li data-nav-id=/godot_recipes/g101/3d/101_3d_03/ title="Creating a 3D Character" class=dd-item><a href=/godot_recipes/g101/3d/101_3d_03/>03. Creating a 3D Character</a></li><li data-nav-id=/godot_recipes/g101/3d/101_3d_04/ title="Using Areas" class=dd-item><a href=/godot_recipes/g101/3d/101_3d_04/>04. Using Areas</a></li><li data-nav-id=/godot_recipes/g101/3d/101_3d_05/ title="Edge Detection & Mouse Capture" class=dd-item><a href=/godot_recipes/g101/3d/101_3d_05/>05. Edge Detection & Mouse Capture</a></li><li data-nav-id=/godot_recipes/g101/3d/101_3d_06/ title="Using CSG" class=dd-item><a href=/godot_recipes/g101/3d/101_3d_06/>06. Using CSG</a></li><li data-nav-id=/godot_recipes/g101/3d/101_3d_07/ title="First-person Character" class=dd-item><a href=/godot_recipes/g101/3d/101_3d_07/>07. First-person Character</a></li></ul></li></ul></li><li data-nav-id=/godot_recipes/basics/ title=Basics class=dd-item><a href=/godot_recipes/basics/><i class="fas fa-toolbox fa-fw"></i>&nbspBasics
          
     </a><ul><li data-nav-id=/godot_recipes/basics/tree_ready_order/ title="Understanding tree order" class=dd-item><a href=/godot_recipes/basics/tree_ready_order/>Understanding tree order</a></li><li data-nav-id=/godot_recipes/basics/node_communication/ title="Node communication (the right way)" class=dd-item><a href=/godot_recipes/basics/node_communication/>Node communication (the right way)</a></li><li data-nav-id=/godot_recipes/basics/getting_nodes/ title="Understanding node paths" class=dd-item><a href=/godot_recipes/basics/getting_nodes/>Understanding node paths</a></li><li data-nav-id=/godot_recipes/basics/understanding_delta/ title="Understanding 'delta'" class=dd-item><a href=/godot_recipes/basics/understanding_delta/>Understanding 'delta'</a></li><li data-nav-id=/godot_recipes/basics/file_io/ title="Saving/loading data" class=dd-item><a href=/godot_recipes/basics/file_io/>Saving/loading data</a></li><li data-nav-id=/godot_recipes/basics/rotation/ title="Circular movement" class=dd-item><a href=/godot_recipes/basics/rotation/>Circular movement</a></li><li data-nav-id=/godot_recipes/basics/custom_resources/ title="Using Custom Resources" class=dd-item><a href=/godot_recipes/basics/custom_resources/>Using Custom Resources</a></li></ul></li><li data-nav-id=/godot_recipes/kyn/ title="Know Your Nodes" class=dd-item><a href=/godot_recipes/kyn/><i class="far fa-circle fa-fw"></i>&nbspKnow Your Nodes
          
</a><ul><li data-nav-id=/godot_recipes/kyn/label/ title=Label class=dd-item><a href=/godot_recipes/kyn/label/>Label</a></li><li data-nav-id=/godot_recipes/kyn/path2d/ title="Path2D & PathFollow2D" class=dd-item><a href=/godot_recipes/kyn/path2d/>Path2D & PathFollow2D</a></li><li data-nav-id=/godot_recipes/kyn/raycast2d/ title=RayCast2D class=dd-item><a href=/godot_recipes/kyn/raycast2d/>RayCast2D</a></li><li data-nav-id=/godot_recipes/kyn/rigidbody2d/ title=RigidBody2D class=dd-item><a href=/godot_recipes/kyn/rigidbody2d/>RigidBody2D</a></li><li data-nav-id=/godot_recipes/kyn/ysort/ title=YSort class=dd-item><a href=/godot_recipes/kyn/ysort/>YSort</a></li></ul></li><li data-nav-id=/godot_recipes/2d/ title=2D class=dd-item><a href=/godot_recipes/2d/><i class="fas fa-shapes fa-fw"></i>&nbsp2D
          
     </a><ul><li data-nav-id=/godot_recipes/2d/8_direction/ title="8-Directional Movement/Animation" class=dd-item><a href=/godot_recipes/2d/8_direction/>8-Directional Movement/Animation</a></li><li data-nav-id=/godot_recipes/2d/enter_exit_screen/ title="Entering/Exiting the screen" class=dd-item><a href=/godot_recipes/2d/enter_exit_screen/>Entering/Exiting the screen</a></li><li data-nav-id=/godot_recipes/2d/platform_character/ title="Platform character" class=dd-item><a href=/godot_recipes/2d/platform_character/>Platform character</a></li><li data-nav-id=/godot_recipes/2d/screen_wrap/ title="Screen wrap" class=dd-item><a href=/godot_recipes/2d/screen_wrap/>Screen wrap</a></li><li data-nav-id=/godot_recipes/2d/splitscreen_demo/ title="Splitscreen multiplayer" class=dd-item><a href=/godot_recipes/2d/splitscreen_demo/>Splitscreen multiplayer</a></li><li data-nav-id=/godot_recipes/2d/tilemap_collision/ title="TileMap: detecting tiles" class=dd-item><a href=/godot_recipes/2d/tilemap_collision/>TileMap: detecting tiles</a></li><li data-nav-id=/godot_recipes/2d/topdown_movement/ title="Top-down movement" class=dd-item><a href=/godot_recipes/2d/topdown_movement/>Top-down movement</a></li><li data-nav-id=/godot_recipes/2d/grid_movement/ title="Grid-based movement" class=dd-item><a href=/godot_recipes/2d/grid_movement/>Grid-based movement</a></li><li data-nav-id=/godot_recipes/2d/car_steering/ title="Car steering" class=dd-item><a href=/godot_recipes/2d/car_steering/>Car steering</a></li><li data-nav-id=/godot_recipes/2d/autotile_intro/ title="TileMap: using autotile" class=dd-item><a href=/godot_recipes/2d/autotile_intro/>TileMap: using autotile</a></li><li data-nav-id=/godot_recipes/2d/2d_align_surface/ title="KinematicBody2D: align with surface" class=dd-item><a href=/godot_recipes/2d/2d_align_surface/>KinematicBody2D: align with surface</a></li><li data-nav-id=/godot_recipes/2d/moving_platforms/ title="Moving Platforms" class=dd-item><a href=/godot_recipes/2d/moving_platforms/>Moving Platforms</a></li><li data-nav-id=/godot_recipes/2d/2d_shooting/ title="Shooting projectiles" class=dd-item><a href=/godot_recipes/2d/2d_shooting/>Shooting projectiles</a></li><li data-nav-id=/godot_recipes/2d/tilemap_animation/ title="TileMap: animated tiles" class=dd-item><a href=/godot_recipes/2d/tilemap_animation/>TileMap: animated tiles</a></li><li data-nav-id=/godot_recipes/2d/screen_shake/ title="Screen Shake" class=dd-item><a href=/godot_recipes/2d/screen_shake/>Screen Shake</a></li><li data-nav-id=/godot_recipes/2d/multi_target_camera/ title="Multitarget Camera" class=dd-item><a href=/godot_recipes/2d/multi_target_camera/>Multitarget Camera</a></li><li data-nav-id=/godot_recipes/2d/ballistic_bullet/ title="Ballistic bullet" class=dd-item><a href=/godot_recipes/2d/ballistic_bullet/>Ballistic bullet</a></li><li data-nav-id=/godot_recipes/2d/touchscreen_camera/ title="Touchscreen Camera" class=dd-item><a href=/godot_recipes/2d/touchscreen_camera/>Touchscreen Camera</a></li><li data-nav-id=/godot_recipes/2d/2d_draw_trajectory/ title="Draw trajectory" class=dd-item><a href=/godot_recipes/2d/2d_draw_trajectory/>Draw trajectory</a></li></ul></li><li data-nav-id=/godot_recipes/3d/ title=3D class="dd-item
parent"><a href=/godot_recipes/3d/><i class="fas fa-cube fa-fw"></i>&nbsp3D
          
     </a><ul><li data-nav-id=/godot_recipes/3d/camera_gimbal/ title="Camera Gimbal" class=dd-item><a href=/godot_recipes/3d/camera_gimbal/>Camera Gimbal</a></li><li data-nav-id=/godot_recipes/3d/interpolated_camera/ title="Interpolated Camera" class=dd-item><a href=/godot_recipes/3d/interpolated_camera/>Interpolated Camera</a></li><li data-nav-id=/godot_recipes/3d/kinematic_body/ title="KinematicBody: Movement" class=dd-item><a href=/godot_recipes/3d/kinematic_body/>KinematicBody: Movement</a></li><li data-nav-id=/godot_recipes/3d/healthbars/ title="3D Unit Healthbars" class=dd-item><a href=/godot_recipes/3d/healthbars/>3D Unit Healthbars</a></li><li data-nav-id=/godot_recipes/3d/3d_shooting/ title="Shooting projectiles" class=dd-item><a href=/godot_recipes/3d/3d_shooting/>Shooting projectiles</a></li><li data-nav-id=/godot_recipes/3d/rolling_cube/ title="Rolling Cube" class="dd-item active"><a href=/godot_recipes/3d/rolling_cube/>Rolling Cube</a></li><li data-nav-id=/godot_recipes/3d/simple_airplane/ title="Simplified Airplane Controller" class=dd-item><a href=/godot_recipes/3d/simple_airplane/>Simplified Airplane Controller</a></li><li data-nav-id=/godot_recipes/3d/spaceship/ title="Arcade-style Spaceship" class=dd-item><a href=/godot_recipes/3d/spaceship/>Arcade-style Spaceship</a></li><li data-nav-id=/godot_recipes/3d/debug_overlay/ title="Drawing Vectors in 3D" class=dd-item><a href=/godot_recipes/3d/debug_overlay/>Drawing Vectors in 3D</a></li><li data-nav-id=/godot_recipes/3d/click_to_move/ title="Click to move" class=dd-item><a href=/godot_recipes/3d/click_to_move/>Click to move</a></li><li data-nav-id=/godot_recipes/3d/3d_sphere_car/ title="Quick Arcade-style Car" class=dd-item><a href=/godot_recipes/3d/3d_sphere_car/>Quick Arcade-style Car</a></li><li data-nav-id=/godot_recipes/3d/rotate_interpolate/ title="Smooth rotation" class=dd-item><a href=/godot_recipes/3d/rotate_interpolate/>Smooth rotation</a></li><li data-nav-id=/godot_recipes/3d/3d_align_surface/ title="KinematicBody: align with surface" class=dd-item><a href=/godot_recipes/3d/3d_align_surface/>KinematicBody: align with surface</a></li><li data-nav-id=/godot_recipes/3d/kinematic_car/ title="3D Kinematic Car" class=dd-item><a href=/godot_recipes/3d/kinematic_car/><i class="fas fa-car"></i>&nbsp3D Kinematic Car
          </a><ul><li data-nav-id=/godot_recipes/3d/kinematic_car/car_base/ title="3D Kinematic Car: Base" class=dd-item><a href=/godot_recipes/3d/kinematic_car/car_base/>3D Kinematic Car: Base</a></li><li data-nav-id=/godot_recipes/3d/kinematic_car/car_traction/ title="3D Kinematic Car: Traction/Drifting" class=dd-item><a href=/godot_recipes/3d/kinematic_car/car_traction/>3D Kinematic Car: Traction/Drifting</a></li><li data-nav-id=/godot_recipes/3d/kinematic_car/car_camera/ title="3D Kinematic Car: Chase Camera" class=dd-item><a href=/godot_recipes/3d/kinematic_car/car_camera/>3D Kinematic Car: Chase Camera</a></li><li data-nav-id=/godot_recipes/3d/kinematic_car/car_slopes/ title="3D Kinematic Car: Slopes & Ramps" class=dd-item><a href=/godot_recipes/3d/kinematic_car/car_slopes/>3D Kinematic Car: Slopes & Ramps</a></li></ul></li></ul></li><li data-nav-id=/godot_recipes/input/ title=Input class=dd-item><a href=/godot_recipes/input/><i class="fas fa-gamepad fa-fw"></i>&nbspInput
          
     </a><ul><li data-nav-id=/godot_recipes/input/input_actions/ title="Input Actions" class=dd-item><a href=/godot_recipes/input/input_actions/>Input Actions</a></li><li data-nav-id=/godot_recipes/input/mouse_input/ title="Mouse Input" class=dd-item><a href=/godot_recipes/input/mouse_input/>Mouse Input</a></li><li data-nav-id=/godot_recipes/input/custom_actions/ title="Adding Input Actions in code" class=dd-item><a href=/godot_recipes/input/custom_actions/>Adding Input Actions in code</a></li><li data-nav-id=/godot_recipes/input/mouse_capture/ title="Capturing the Mouse" class=dd-item><a href=/godot_recipes/input/mouse_capture/>Capturing the Mouse</a></li><li data-nav-id=/godot_recipes/input/custom_mouse_cursor/ title="Customizing the Mouse Cursor" class=dd-item><a href=/godot_recipes/input/custom_mouse_cursor/>Customizing the Mouse Cursor</a></li><li data-nav-id=/godot_recipes/input/multi_unit_select/ title="Mouse: Drag-select multiple units" class=dd-item><a href=/godot_recipes/input/multi_unit_select/>Mouse: Drag-select multiple units</a></li></ul></li><li data-nav-id=/godot_recipes/animation/ title=Animation class=dd-item><a href=/godot_recipes/animation/><i class="fas fa-film fa-fw"></i>&nbspAnimation
          
     </a><ul><li data-nav-id=/godot_recipes/animation/spritesheet_animation/ title="Spritesheet animation" class=dd-item><a href=/godot_recipes/animation/spritesheet_animation/>Spritesheet animation</a></li><li data-nav-id=/godot_recipes/animation/melee_attacks/ title="Melee attacks" class=dd-item><a href=/godot_recipes/animation/melee_attacks/>Melee attacks</a></li><li data-nav-id=/godot_recipes/animation/animation_state_machine/ title="Controlling animation states" class=dd-item><a href=/godot_recipes/animation/animation_state_machine/>Controlling animation states</a></li></ul></li><li data-nav-id=/godot_recipes/ui/ title=UI class=dd-item><a href=/godot_recipes/ui/><i class="far fa-window-maximize fa-fw"></i>&nbspUI
          
     </a><ul><li data-nav-id=/godot_recipes/ui/labels/ title=Labels class=dd-item><a href=/godot_recipes/ui/labels/>Labels</a></li><li data-nav-id=/godot_recipes/ui/containers/ title=Containers class=dd-item><a href=/godot_recipes/ui/containers/>Containers</a></li><li data-nav-id=/godot_recipes/ui/cooldown_button/ title="Cooldown Button" class=dd-item><a href=/godot_recipes/ui/cooldown_button/>Cooldown Button</a></li><li data-nav-id=/godot_recipes/ui/heart_containers_3/ title="Heart Containers: 3 Ways" class=dd-item><a href=/godot_recipes/ui/heart_containers_3/>Heart Containers: 3 Ways</a></li><li data-nav-id=/godot_recipes/ui/debug_overlay/ title="Displaying debug data" class=dd-item><a href=/godot_recipes/ui/debug_overlay/>Displaying debug data</a></li><li data-nav-id=/godot_recipes/ui/unit_healthbar/ title="Object Healthbars" class=dd-item><a href=/godot_recipes/ui/unit_healthbar/>Object Healthbars</a></li><li data-nav-id=/godot_recipes/ui/floating_text/ title="Floating combat text" class=dd-item><a href=/godot_recipes/ui/floating_text/>Floating combat text</a></li><li data-nav-id=/godot_recipes/ui/minimap/ title=Minimap/radar class=dd-item><a href=/godot_recipes/ui/minimap/>Minimap/radar</a></li><li data-nav-id=/godot_recipes/ui/radial_menu/ title="Radial Popup Menu" class=dd-item><a href=/godot_recipes/ui/radial_menu/>Radial Popup Menu</a></li></ul></li><li data-nav-id=/godot_recipes/math/ title="Gamedev Math" class=dd-item><a href=/godot_recipes/math/><i class="fas fa-rocket fa-fw"></i>&nbspGamedev Math
          
   </a><ul><li data-nav-id=/godot_recipes/math/interpolation/ title=Interpolation class=dd-item><a href=/godot_recipes/math/interpolation/>Interpolation</a></li><li data-nav-id=/godot_recipes/math/transforms/ title=Transforms class=dd-item><a href=/godot_recipes/math/transforms/>Transforms</a></li><li data-nav-id=/godot_recipes/math/noise/ title=Noise class=dd-item><a href=/godot_recipes/math/noise/>Noise</a></li><li data-nav-id=/godot_recipes/math/dot_cross_product/ title="Vectors: Using Dot and Cross Product" class=dd-item><a href=/godot_recipes/math/dot_cross_product/>Vectors: Using Dot and Cross Product</a></li></ul></li><li data-nav-id=/godot_recipes/recipes/ title=Misc class=dd-item><a href=/godot_recipes/recipes/><i class="fas fa-box-open"></i>&nbspMisc
          
     </a><ul><li data-nav-id=/godot_recipes/recipes/singleton/ title="Autoloads/ Singletons" class=dd-item><a href=/godot_recipes/recipes/singleton/>Autoloads/ Singletons</a></li><li data-nav-id=/godot_recipes/recipes/godot3_inheritance/ title=Inheritance class=dd-item><a href=/godot_recipes/recipes/godot3_inheritance/>Inheritance</a></li></ul></li><li data-nav-id=/godot_recipes/physics/ title=Physics class=dd-item><a href=/godot_recipes/physics/><i class="fas fa-atom fa-fw"></i>&nbspPhysics
          
     </a><ul><li data-nav-id=/godot_recipes/physics/kinematic_friction/ title="Kinematic Friction" class=dd-item><a href=/godot_recipes/physics/kinematic_friction/>Kinematic Friction</a></li><li data-nav-id=/godot_recipes/physics/rigidbody_drag_drop/ title="RigidBody2D: Drag and Drop" class=dd-item><a href=/godot_recipes/physics/rigidbody_drag_drop/>RigidBody2D: Drag and Drop</a></li><li data-nav-id=/godot_recipes/physics/kinematic_to_rigidbody/ title="Kinematic to Rigid Body Interaction" class=dd-item><a href=/godot_recipes/physics/kinematic_to_rigidbody/>Kinematic to Rigid Body Interaction</a></li><li data-nav-id=/godot_recipes/physics/joints_2d/ title="Using 2D Joints" class=dd-item><a href=/godot_recipes/physics/joints_2d/>Using 2D Joints</a></li><li data-nav-id=/godot_recipes/physics/conveyor_belt/ title="Conveyor Belt" class=dd-item><a href=/godot_recipes/physics/conveyor_belt/>Conveyor Belt</a></li></ul></li><li data-nav-id=/godot_recipes/ai/ title=AI/Behavior class=dd-item><a href=/godot_recipes/ai/><i class="fas fa-project-diagram fa-fw"></i>&nbspAI/Behavior
          
    </a><ul><li data-nav-id=/godot_recipes/ai/chase/ title="Chasing the player" class=dd-item><a href=/godot_recipes/ai/chase/>Chasing the player</a></li><li data-nav-id=/godot_recipes/ai/path_follow/ title="Path following" class=dd-item><a href=/godot_recipes/ai/path_follow/>Path following</a></li><li data-nav-id=/godot_recipes/ai/changing_behaviors/ title="Changing behaviors" class=dd-item><a href=/godot_recipes/ai/changing_behaviors/>Changing behaviors</a></li><li data-nav-id=/godot_recipes/ai/homing_missile/ title="Homing missile" class=dd-item><a href=/godot_recipes/ai/homing_missile/>Homing missile</a></li><li data-nav-id=/godot_recipes/ai/context_map/ title="Context-based steering" class=dd-item><a href=/godot_recipes/ai/context_map/>Context-based steering</a></li></ul></li><li data-nav-id=/godot_recipes/shaders/ title=Shaders class=dd-item><a href=/godot_recipes/shaders/><i class="fas fa-draw-polygon fa-fw"></i>&nbspShaders
          
     </a><ul><li data-nav-id=/godot_recipes/shaders/intro/ title="Shaders: intro" class=dd-item><a href=/godot_recipes/shaders/intro/>Shaders: intro</a></li><li data-nav-id=/godot_recipes/shaders/interacting/ title="Interacting with Shaders" class=dd-item><a href=/godot_recipes/shaders/interacting/>Interacting with Shaders</a></li><li data-nav-id=/godot_recipes/shaders/greyscale/ title="Greyscale (monochrome) shader" class=dd-item><a href=/godot_recipes/shaders/greyscale/>Greyscale (monochrome) shader</a></li><li data-nav-id=/godot_recipes/shaders/blur/ title="Blur shader" class=dd-item><a href=/godot_recipes/shaders/blur/>Blur shader</a></li></ul></li><li data-nav-id=/godot_recipes/audio/ title=Audio class=dd-item><a href=/godot_recipes/audio/><i class="fas fa-volume-up fa-fw"></i>&nbspAudio
          
     </a><ul><li data-nav-id=/godot_recipes/audio/audio_manager/ title="Audio Manager" class=dd-item><a href=/godot_recipes/audio/audio_manager/>Audio Manager</a></li></ul></li><li data-nav-id=/godot_recipes/export/ title=Exporting class=dd-item><a href=/godot_recipes/export/><i class="fas fa-file-export fa-fw"></i>&nbspExporting
          
     </a></li><li data-nav-id=/godot_recipes/games/ title="Game Tutorials" class=dd-item><a href=/godot_recipes/games/><i class="fas fa-chess-pawn fa-fw"></i>&nbspGame Tutorials
          
 </a><ul><li data-nav-id=/godot_recipes/games/circle_jump/ title="Mobile Game: Circle Jump" class=dd-item><a href=/godot_recipes/games/circle_jump/><i class="far fa-circle fa-fw"></i>&nbspMobile Game: Circle Jump
   </a><ul><li data-nav-id=/godot_recipes/games/circle_jump/circle_jump_01/ title="Project setup" class=dd-item><a href=/godot_recipes/games/circle_jump/circle_jump_01/>01. Project setup</a></li><li data-nav-id=/godot_recipes/games/circle_jump/circle_jump_02/ title="Spawning Circles" class=dd-item><a href=/godot_recipes/games/circle_jump/circle_jump_02/>02. Spawning Circles</a></li><li data-nav-id=/godot_recipes/games/circle_jump/circle_jump_03/ title="Limited circles" class=dd-item><a href=/godot_recipes/games/circle_jump/circle_jump_03/>03. Limited circles</a></li><li data-nav-id=/godot_recipes/games/circle_jump/circle_jump_04/ title=Menus class=dd-item><a href=/godot_recipes/games/circle_jump/circle_jump_04/>04. Menus</a></li><li data-nav-id=/godot_recipes/games/circle_jump/circle_jump_05/ title="Score and HUD" class=dd-item><a href=/godot_recipes/games/circle_jump/circle_jump_05/>05. Score and HUD</a></li><li data-nav-id=/godot_recipes/games/circle_jump/circle_jump_06/ title="Sound and Colors" class=dd-item><a href=/godot_recipes/games/circle_jump/circle_jump_06/>06. Sound and Colors</a></li><li data-nav-id=/godot_recipes/games/circle_jump/circle_jump_07/ title="Moving circles" class=dd-item><a href=/godot_recipes/games/circle_jump/circle_jump_07/>07. Moving circles</a></li><li data-nav-id=/godot_recipes/games/circle_jump/circle_jump_11/ title="Mobile ads" class=dd-item><a href=/godot_recipes/games/circle_jump/circle_jump_11/>11. Mobile ads</a></li><li data-nav-id=/godot_recipes/games/circle_jump/circle_jump_12/ title="Saving settings" class=dd-item><a href=/godot_recipes/games/circle_jump/circle_jump_12/>12. Saving settings</a></li></ul></li></ul></li></ul><section id=shortcuts><h3>More</h3><ul><li><a class=padding href=https://kidscancode.org/godot_recipes/tags><i class="fas fa-tags"></i>&nbsp;Tags</a></li></ul></section><section id=footer><p align=center><a href=https://github.com/kidscancode/godot_lessons><i class="fab fa-github-square fa-3x"></i></a><a href=https://www.youtube.com/c/KidsCanCodeOrg><i class="fab fa-youtube-square fa-3x"></i></a><a href=http://twitter.com/KidsCanCode><i class="fab fa-twitter-square fa-3x"></i></a><a href=https://discord.gg/bFTqjfdgDz><i class="fab fa-discord fa-3x"></i></a></p><p align=center><i class="far fa-copyright"></i>&nbsp;2019-2021 KidsCanCode</p></section></div></nav><section id=body><div id=overlay></div><div class="padding highlightable"><div><div id=top-bar><div id=breadcrumbs itemscope itemtype=http://data-vocabulary.org/Breadcrumb><span id=sidebar-toggle-span><a href=# id=sidebar-toggle data-sidebar-toggle><i class="fas fa-bars"></i></a></span><span id=toc-menu><i class="fas fa-list-alt"></i></span><span class=links><a href=/godot_recipes/>Home</a> > <a href=/godot_recipes/3d/>3D</a> > Rolling Cube</span></div><div class=progress><div class=wrapper><nav id=TableOfContents><ul><li><a href=#problem>Problem</a></li><li><a href=#solution>Solution</a><ul><li><a href=#node-setup>Node setup</a></li><li><a href=#movement-script>Movement script</a></li><li><a href=#checking-for-collisions>Checking for collisions</a></li></ul></li><li><a href=#related-recipes>Related recipes</a><ul><li></li></ul></li></ul></nav></div></div></div></div><div id=head-tags></div><div id=body-inner><h1>Rolling Cube</h1><h2 id=problem>Problem</h2><p>You want to make a rolling cube in 3D.</p><p><video width=500 controls src=/godot_recipes/img/rolling_cube.webm></video></p><h2 id=solution>Solution</h2><p>Rolling a cube is trickier than it seems. You can&rsquo;t just rotate the cube around its center:</p><p><img src=/godot_recipes/img/cube_001.gif alt=alt></p><p>Instead, the cube needs to be rotated around its bottom edge.</p><p><img src=/godot_recipes/img/cube_002.gif alt=alt></p><p>Here&rsquo;s the tricky part: which bottom edge? It depends on which direction the cube is rolling.</p><p>In preparing this recipe, I experimented with a few different solutions to this problem:</p><ul><li>Pure math - calculating and applying rotation transforms</li><li>AnimationPlayer - using animations to key the rotations and offsets</li><li>Helper nodes - using Spatial(s) as rotation helpers</li></ul><p>They all worked fine, but I found the last option the most flexible and easiest to adapt, so that&rsquo;s what we&rsquo;ll do here.</p><h3 id=node-setup>Node setup</h3><pre><code>Cube: <i class=gd-KinematicBody3D></i> KinematicBody
    Pivot: <i class=gd-Node3D></i> Spatial
        Mesh: <i class=gd-MeshInstance3D></i> MeshInstance
    Collision: <i class=gd-CollisionShape3D></i> CollisionShape
    Tween: <i class=gd-Tween></i> Tween
</code></pre><div class="notices tip"><p>You can do this with <i class=gd-RigidBody3D></i><code>RigidBody</code>, <i class=gd-KinematicBody3D></i><code>KinematicBody</code>, or <i class=gd-Area3D></i><code>Area</code> as your collision node. There will be minor differences in how you handle movement. Which node you choose should depend on what other behavior you want in your game. For this recipe, we&rsquo;re only concerned with the movement.</p></div><p>By default, everything will be centered at <code>(0, 0, 0)</code> so the first thing we&rsquo;re going to do is offset everything so that the <em>bottom center</em> of the cube is the <i class=gd-KinematicBody3D></i><code>KinematicBody</code>'s position.</p><p>To do this, move the mesh and collision nodes up to <code>(0, 1, 0)</code>, leaving the rest where they are. Now when you select the root node, its position will be the <em>bottom</em> of the cube:</p><p><img src=/godot_recipes/img/cube_003.png alt=alt></p><p>Now when you want to roll the cube, you&rsquo;ll need to move the <code>Pivot</code> one unit in the direction you want to move. Since the mesh is attached, move it the opposite amount. For example, to roll to the right (<strong>+X</strong>), you&rsquo;ll end up with this:</p><p><img src=/godot_recipes/img/cube_004.gif alt=alt></p><p>Now the pivot node is at the correct edge and rotating it will also rotate the mesh.</p><h3 id=movement-script>Movement script</h3><p>The movement is broken in to 3 steps:</p><h4 id=step-1>Step 1</h4><p>Here we apply the two offsets shown above: shift the <code>Pivot</code> in the direction of movement, and shift the <code>Mesh</code> in the opposite direction.</p><h4 id=step-2>Step 2</h4><p>In this step we animate the rotation. We find the axis of rotation using the <em>cross product</em> of the direction and the down vector. Then we use the <i class=gd-Tween></i><code>Tween</code> to animate rotating the pivot&rsquo;s <em>basis</em>. We use <code>yield()</code> to wait for the animation to finish.</p><h4 id=step-3>Step 3</h4><p>Finally, we need to reset everything so that it&rsquo;s ready to happen again. In the end, we want to have the cube moved 2 units in the chosen direction (for a cube of size 2) and the pivot and mesh back at their original positions.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-gdscript data-lang=gdscript><span style=color:#ff79c6>extends</span> KinematicBody

<span style=color:#ff79c6>export</span> <span style=color:#ff79c6>var</span> speed <span style=color:#ff79c6>=</span> <span style=color:#bd93f9>4.0</span>

<span style=color:#ff79c6>onready</span> <span style=color:#ff79c6>var</span> pivot <span style=color:#ff79c6>=</span> <span style=color:#ff79c6>$</span>Pivot
<span style=color:#ff79c6>onready</span> <span style=color:#ff79c6>var</span> mesh <span style=color:#ff79c6>=</span> <span style=color:#ff79c6>$</span>Pivot<span style=color:#ff79c6>/</span>MeshInstance
<span style=color:#ff79c6>onready</span> <span style=color:#ff79c6>var</span> tween <span style=color:#ff79c6>=</span> <span style=color:#ff79c6>$</span>Tween


<span style=color:#ff79c6>func</span> _physics_process(_delta):
    <span style=color:#ff79c6>if</span> Input<span style=color:#ff79c6>.</span>is_action_pressed(<span style=color:#f1fa8c>&#34;right&#34;</span>):
        roll(Vector3<span style=color:#ff79c6>.</span>RIGHT)
    <span style=color:#ff79c6>if</span> Input<span style=color:#ff79c6>.</span>is_action_pressed(<span style=color:#f1fa8c>&#34;left&#34;</span>):
        roll(Vector3<span style=color:#ff79c6>.</span>LEFT)
    <span style=color:#ff79c6>if</span> Input<span style=color:#ff79c6>.</span>is_action_pressed(<span style=color:#f1fa8c>&#34;up&#34;</span>):
        roll(Vector3<span style=color:#ff79c6>.</span>FORWARD)
    <span style=color:#ff79c6>if</span> Input<span style=color:#ff79c6>.</span>is_action_pressed(<span style=color:#f1fa8c>&#34;down&#34;</span>):
        roll(Vector3<span style=color:#ff79c6>.</span>BACK)


<span style=color:#ff79c6>func</span> roll(dir):
    <span style=color:#6272a4># Do nothing if we&#39;re currently rolling.</span>
    <span style=color:#ff79c6>if</span> tween<span style=color:#ff79c6>.</span>is_active():
        <span style=color:#ff79c6>return</span>

    <span style=color:#6272a4>## Step 1: Offset the pivot</span>
    pivot<span style=color:#ff79c6>.</span>translate(dir)
    mesh<span style=color:#ff79c6>.</span>translate(<span style=color:#ff79c6>-</span>dir)

    <span style=color:#6272a4>## Step 2: Animate the rotation</span>
    <span style=color:#ff79c6>var</span> axis <span style=color:#ff79c6>=</span> dir<span style=color:#ff79c6>.</span>cross(Vector3<span style=color:#ff79c6>.</span>DOWN)
    tween<span style=color:#ff79c6>.</span>interpolate_property(pivot, <span style=color:#f1fa8c>&#34;transform:basis&#34;</span>,
            null, pivot<span style=color:#ff79c6>.</span>transform<span style=color:#ff79c6>.</span>basis<span style=color:#ff79c6>.</span>rotated(axis, PI<span style=color:#ff79c6>/</span><span style=color:#bd93f9>2</span>),
            <span style=color:#bd93f9>1</span><span style=color:#ff79c6>/</span>speed, Tween<span style=color:#ff79c6>.</span>TRANS_QUAD, Tween<span style=color:#ff79c6>.</span>EASE_IN)
    tween<span style=color:#ff79c6>.</span>start()
    <span style=color:#8be9fd;font-style:italic>yield</span>(tween, <span style=color:#f1fa8c>&#34;tween_all_completed&#34;</span>)

    <span style=color:#6272a4>## Step3: Finalize movement and reverse the offset</span>
    transform<span style=color:#ff79c6>.</span>origin <span style=color:#ff79c6>+=</span> dir <span style=color:#ff79c6>*</span> <span style=color:#bd93f9>2</span>
    pivot<span style=color:#ff79c6>.</span>transform <span style=color:#ff79c6>=</span> Transform<span style=color:#ff79c6>.</span>IDENTITY
    mesh<span style=color:#ff79c6>.</span>transform<span style=color:#ff79c6>.</span>origin <span style=color:#ff79c6>=</span> Vector3(<span style=color:#bd93f9>0</span>, <span style=color:#bd93f9>1</span>, <span style=color:#bd93f9>0</span>)
</code></pre></div><p>Try it, and you&rsquo;ll notice there&rsquo;s one problem:</p><p><img src=/godot_recipes/img/cube_006.gif alt=alt></p><p>The cube is &ldquo;squishing&rdquo; because of the basis interpolation, which is going from 0 to 90 degrees. Since the basis also represents scale, this causes some deformation.</p><p>We could solve this in 2 ways. First, we could break up the rotation into two separate tweens, each doing 45 degrees. However, I find this tricky when we want to play around with the different tween transitions.</p><p>The other way is to ensure the scale remains constant. We can do this by connecting the <i class=gd-Tween></i><code>Tween</code>'s <code>tween_step</code> signal, which fires every frame during the tween, and normalizing the scale. The <code>orthonormalized()</code> method does this:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-gdscript data-lang=gdscript><span style=color:#ff79c6>func</span> _on_Tween_tween_step(_object, _key, _elapsed, _value):
    pivot<span style=color:#ff79c6>.</span>transform <span style=color:#ff79c6>=</span> pivot<span style=color:#ff79c6>.</span>transform<span style=color:#ff79c6>.</span>orthonormalized()
</code></pre></div><p>If your cube&rsquo;s texture isn&rsquo;t symmetrical, you may notice that it&rsquo;s resetting after every roll. To preserve the rotation of the mesh, add the following:</p><p>In <em>Step 1</em></p><p>Change <code>mesh.translate(-dir)</code> to <code>mesh.global_translate(-dir)</code>.</p><p>In <em>Step 3</em></p><p>Add two lines to keep the mesh rotation after reset:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-gdscript data-lang=gdscript><span style=color:#6272a4>## Step3: Finalize movement and reverse the offset</span>
transform<span style=color:#ff79c6>.</span>origin <span style=color:#ff79c6>+=</span> dir <span style=color:#ff79c6>*</span> <span style=color:#bd93f9>2</span>
<span style=color:#ff79c6>var</span> b <span style=color:#ff79c6>=</span> mesh<span style=color:#ff79c6>.</span>global_transform<span style=color:#ff79c6>.</span>basis  <span style=color:#6272a4>## Save the rotation</span>
pivot<span style=color:#ff79c6>.</span>transform <span style=color:#ff79c6>=</span> Transform<span style=color:#ff79c6>.</span>IDENTITY
mesh<span style=color:#ff79c6>.</span>transform<span style=color:#ff79c6>.</span>origin <span style=color:#ff79c6>=</span> Vector3(<span style=color:#bd93f9>0</span>, <span style=color:#bd93f9>1</span>, <span style=color:#bd93f9>0</span>)
mesh<span style=color:#ff79c6>.</span>global_transform<span style=color:#ff79c6>.</span>basis <span style=color:#ff79c6>=</span> b  <span style=color:#6272a4>## Apply the rotation</span>
</code></pre></div><h3 id=checking-for-collisions>Checking for collisions</h3><p>If you plan to have obstacles in your game, you can check for collisions before moving (similar to any other grid-based movement scheme). Add a raycast check before <em>Step 1</em> of the move:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-gdscript data-lang=gdscript><span style=color:#6272a4># Cast a ray before moving to check for obstacles</span>
<span style=color:#ff79c6>var</span> space <span style=color:#ff79c6>=</span> get_world()<span style=color:#ff79c6>.</span>direct_space_state
<span style=color:#ff79c6>var</span> collision <span style=color:#ff79c6>=</span> space<span style=color:#ff79c6>.</span>intersect_ray(mesh<span style=color:#ff79c6>.</span>global_transform<span style=color:#ff79c6>.</span>origin,
        mesh<span style=color:#ff79c6>.</span>global_transform<span style=color:#ff79c6>.</span>origin <span style=color:#ff79c6>+</span> dir <span style=color:#ff79c6>*</span> <span style=color:#bd93f9>2.5</span>, [self])
<span style=color:#ff79c6>if</span> collision:
    <span style=color:#ff79c6>return</span>
</code></pre></div><div class="notices note"><p>You could also use a <i class=gd-RayCast3d></i><code>RayCast</code> node. Just remember to call <code>force_raycast_update()</code> before checking.</p></div><h2 id=related-recipes>Related recipes</h2><ul><li><a href=/godot_recipes/math/transforms/>Transforms</a></li></ul><h4 id=like-video>Like video?</h4><div style=position:relative;padding-bottom:56.25%;height:0;overflow:hidden><iframe src=https://www.youtube.com/embed/Dq-Jr8boz50 style=position:absolute;top:0;left:0;width:100%;height:100%;border:0 allowfullscreen title="YouTube Video"></iframe></div><h3>Comments</h3><div id=gh-comments><br><br><div id=gh-comments-list></div><a href=javascript:void(0) id=gh-load-comments class=btn style=display:none>Load more comments</a></div><script type=text/javascript src=/godot_recipes/js/github-comments.js></script><script type=text/javascript>DoGithubComments(101);</script><footer class=footline></footer></div></div><div id=navigation></div></section><div style=left:-1000px;overflow:scroll;position:absolute;top:-1000px;border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px><div style=border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px></div></div><script src=/godot_recipes/js/clipboard.min.js?1626134633></script><script src=/godot_recipes/js/perfect-scrollbar.min.js?1626134633></script><script src=/godot_recipes/js/perfect-scrollbar.jquery.min.js?1626134633></script><script src=/godot_recipes/js/jquery.sticky.js?1626134633></script><script src=/godot_recipes/js/featherlight.min.js?1626134633></script><script src=/godot_recipes/js/html5shiv-printshiv.min.js?1626134633></script><script src=/godot_recipes/js/highlight.pack.js?1626134633></script><script>hljs.initHighlightingOnLoad();</script><script src=/godot_recipes/js/modernizr.custom-3.6.0.js?1626134633></script><script src=/godot_recipes/js/learn.js?1626134633></script><script src=/godot_recipes/js/hugo-learn.js?1626134633></script><link href=/godot_recipes/mermaid/mermaid.css?1626134633 type=text/css rel=stylesheet><script src=/godot_recipes/mermaid/mermaid.js?1626134633></script><script>mermaid.initialize({startOnLoad:true});</script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-39851424-1','auto');ga('send','pageview');}</script></body></html>