<!doctype html><html lang=en class="js csstransforms3d"><head><meta charset=utf-8><meta name=description content="Gamedev lessons for Godot Engine."><meta name=keywords content="gamedev,programming,game development,coding,gdscript,game design"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=generator content="Hugo 0.68.3"><meta name=description content><link rel=icon href=/godot_recipes/images/favicon.png type=image/png><title>Context-based steering :: Godot Recipes</title><link href=/godot_recipes/css/gd-icon-font.css?1624146714 rel=stylesheet><link href=/godot_recipes/css/nucleus.css?1624146714 rel=stylesheet><link href=/godot_recipes/css/fontawesome-all.min.css?1624146714 rel=stylesheet><link href=/godot_recipes/css/hybrid.css?1624146714 rel=stylesheet><link href=/godot_recipes/css/featherlight.min.css?1624146714 rel=stylesheet><link href=/godot_recipes/css/perfect-scrollbar.min.css?1624146714 rel=stylesheet><link href=/godot_recipes/css/auto-complete.css?1624146714 rel=stylesheet><link href=/godot_recipes/css/atom-one-dark-reasonable.css?1624146714 rel=stylesheet><link href=/godot_recipes/css/theme.css?1624146714 rel=stylesheet><link href=/godot_recipes/css/hugo-theme.css?1624146714 rel=stylesheet><link href=/godot_recipes/css/theme-green.css?1624146714 rel=stylesheet><script src=/godot_recipes/js/jquery-3.3.1.min.js?1624146714></script><style type=text/css>:root #header+#content>#left>#rlblock_left{display:none!important}:not(pre)>code+span.copy-to-clipboard{display:none}</style><link href="https://fonts.googleapis.com/css?family=Work+Sans:300,400,500" rel=stylesheet><style type=text/css>pre code{white-space:pre}</style></head><body data-url=/godot_recipes/ai/context_map/><nav id=sidebar><div id=header-wrapper><div id=header><a href=http://godotrecipes.com><div class=mylogo>Godot Recipes</div></a><img src=/godot_recipes/images/kcc_logo_square.png></div><a href=https://www.patreon.com/kidscancode><img src=/godot_recipes/img/become_a_patron_button.png></a><div class=searchbox><label for=search-by><i class="fas fa-search"></i></label><input data-search-input id=search-by type=search placeholder=Search...>
<span data-search-clear><i class="fas fa-times"></i></span></div><script type=text/javascript src=/godot_recipes/js/lunr.min.js?1624146714></script><script type=text/javascript src=/godot_recipes/js/auto-complete.js?1624146714></script><script type=text/javascript>var baseurl="https:\/\/kidscancode.org\/godot_recipes\/";</script><script type=text/javascript src=/godot_recipes/js/search.js?1624146714></script></div><div class=highlightable><ul class=topics><li data-nav-id=/godot_recipes/recent/ title="Fresh Recipes" class=dd-item><a href=/godot_recipes/recent/><i class="fas fa-newspaper fa-fw"></i>&nbspFresh Recipes
          
  </a></li><li data-nav-id=/godot_recipes/g101/ title="Godot 101" class=dd-item><a href=/godot_recipes/g101/><i class="fas fa-graduation-cap fa-fw"></i>&nbspGodot 101
          
     </a><ul><li data-nav-id=/godot_recipes/g101/start/ title="Getting Started" class=dd-item><a href=/godot_recipes/g101/start/><i class="fas fa-feather-alt fa-fw"></i>&nbspGetting Started
          
</a><ul><li data-nav-id=/godot_recipes/g101/start/101_01/ title="What is Godot?" class=dd-item><a href=/godot_recipes/g101/start/101_01/>01. What is Godot?</a></li><li data-nav-id=/godot_recipes/g101/start/101_02/ title="Godot's Editor: Finding your way around" class=dd-item><a href=/godot_recipes/g101/start/101_02/>02. The Godot Editor</a></li><li data-nav-id=/godot_recipes/g101/start/101_03/ title="Nodes: Godot's building blocks" class=dd-item><a href=/godot_recipes/g101/start/101_03/>03. Nodes</a></li></ul></li><li data-nav-id=/godot_recipes/g101/gdscript/ title=GDScript class=dd-item><a href=/godot_recipes/g101/gdscript/><i class="fas fa-scroll fa-fw"></i>&nbspGDScript
          
     </a><ul><li data-nav-id=/godot_recipes/g101/gdscript/gdscript_start/ title="GDScript: Getting started" class=dd-item><a href=/godot_recipes/g101/gdscript/gdscript_start/>GDScript: Getting started</a></li></ul></li><li data-nav-id=/godot_recipes/g101/3d/ title="Intro to 3D" class=dd-item><a href=/godot_recipes/g101/3d/><i class="fas fa-cube fa-fw"></i>&nbspIntro to 3D
          
    </a><ul><li data-nav-id=/godot_recipes/g101/3d/101_3d_01/ title="The 3D Editor" class=dd-item><a href=/godot_recipes/g101/3d/101_3d_01/>01. The 3D Editor</a></li><li data-nav-id=/godot_recipes/g101/3d/101_3d_02/ title="Importing 3D Objects" class=dd-item><a href=/godot_recipes/g101/3d/101_3d_02/>02. Importing 3D Objects</a></li><li data-nav-id=/godot_recipes/g101/3d/101_3d_03/ title="Creating a 3D Character" class=dd-item><a href=/godot_recipes/g101/3d/101_3d_03/>03. Creating a 3D Character</a></li><li data-nav-id=/godot_recipes/g101/3d/101_3d_04/ title="Using Areas" class=dd-item><a href=/godot_recipes/g101/3d/101_3d_04/>04. Using Areas</a></li><li data-nav-id=/godot_recipes/g101/3d/101_3d_05/ title="Edge Detection & Mouse Capture" class=dd-item><a href=/godot_recipes/g101/3d/101_3d_05/>05. Edge Detection & Mouse Capture</a></li><li data-nav-id=/godot_recipes/g101/3d/101_3d_06/ title="Using CSG" class=dd-item><a href=/godot_recipes/g101/3d/101_3d_06/>06. Using CSG</a></li><li data-nav-id=/godot_recipes/g101/3d/101_3d_07/ title="First-person Character" class=dd-item><a href=/godot_recipes/g101/3d/101_3d_07/>07. First-person Character</a></li></ul></li></ul></li><li data-nav-id=/godot_recipes/basics/ title=Basics class=dd-item><a href=/godot_recipes/basics/><i class="fas fa-toolbox fa-fw"></i>&nbspBasics
          
     </a><ul><li data-nav-id=/godot_recipes/basics/tree_ready_order/ title="Understanding tree order" class=dd-item><a href=/godot_recipes/basics/tree_ready_order/>Understanding tree order</a></li><li data-nav-id=/godot_recipes/basics/node_communication/ title="Node communication (the right way)" class=dd-item><a href=/godot_recipes/basics/node_communication/>Node communication (the right way)</a></li><li data-nav-id=/godot_recipes/basics/getting_nodes/ title="Understanding node paths" class=dd-item><a href=/godot_recipes/basics/getting_nodes/>Understanding node paths</a></li><li data-nav-id=/godot_recipes/basics/understanding_delta/ title="Understanding 'delta'" class=dd-item><a href=/godot_recipes/basics/understanding_delta/>Understanding 'delta'</a></li><li data-nav-id=/godot_recipes/basics/file_io/ title="Saving/loading data" class=dd-item><a href=/godot_recipes/basics/file_io/>Saving/loading data</a></li><li data-nav-id=/godot_recipes/basics/rotation/ title="Circular movement" class=dd-item><a href=/godot_recipes/basics/rotation/>Circular movement</a></li><li data-nav-id=/godot_recipes/basics/custom_resources/ title="Using Custom Resources" class=dd-item><a href=/godot_recipes/basics/custom_resources/>Using Custom Resources</a></li></ul></li><li data-nav-id=/godot_recipes/kyn/ title="Know Your Nodes" class=dd-item><a href=/godot_recipes/kyn/><i class="far fa-circle fa-fw"></i>&nbspKnow Your Nodes
          
</a><ul><li data-nav-id=/godot_recipes/kyn/label/ title=Label class=dd-item><a href=/godot_recipes/kyn/label/>Label</a></li><li data-nav-id=/godot_recipes/kyn/path2d/ title="Path2D & PathFollow2D" class=dd-item><a href=/godot_recipes/kyn/path2d/>Path2D & PathFollow2D</a></li><li data-nav-id=/godot_recipes/kyn/raycast2d/ title=RayCast2D class=dd-item><a href=/godot_recipes/kyn/raycast2d/>RayCast2D</a></li><li data-nav-id=/godot_recipes/kyn/ysort/ title=YSort class=dd-item><a href=/godot_recipes/kyn/ysort/>YSort</a></li></ul></li><li data-nav-id=/godot_recipes/2d/ title=2D class=dd-item><a href=/godot_recipes/2d/><i class="fas fa-shapes fa-fw"></i>&nbsp2D
          
     </a><ul><li data-nav-id=/godot_recipes/2d/enter_exit_screen/ title="Entering/Exiting the screen" class=dd-item><a href=/godot_recipes/2d/enter_exit_screen/>Entering/Exiting the screen</a></li><li data-nav-id=/godot_recipes/2d/platform_character/ title="Platform character" class=dd-item><a href=/godot_recipes/2d/platform_character/>Platform character</a></li><li data-nav-id=/godot_recipes/2d/screen_wrap/ title="Screen wrap" class=dd-item><a href=/godot_recipes/2d/screen_wrap/>Screen wrap</a></li><li data-nav-id=/godot_recipes/2d/splitscreen_demo/ title="Splitscreen multiplayer" class=dd-item><a href=/godot_recipes/2d/splitscreen_demo/>Splitscreen multiplayer</a></li><li data-nav-id=/godot_recipes/2d/tilemap_collision/ title="TileMap: detecting tiles" class=dd-item><a href=/godot_recipes/2d/tilemap_collision/>TileMap: detecting tiles</a></li><li data-nav-id=/godot_recipes/2d/topdown_movement/ title="Top-down movement" class=dd-item><a href=/godot_recipes/2d/topdown_movement/>Top-down movement</a></li><li data-nav-id=/godot_recipes/2d/grid_movement/ title="Grid-based movement" class=dd-item><a href=/godot_recipes/2d/grid_movement/>Grid-based movement</a></li><li data-nav-id=/godot_recipes/2d/car_steering/ title="Car steering" class=dd-item><a href=/godot_recipes/2d/car_steering/>Car steering</a></li><li data-nav-id=/godot_recipes/2d/autotile_intro/ title="TileMap: using autotile" class=dd-item><a href=/godot_recipes/2d/autotile_intro/>TileMap: using autotile</a></li><li data-nav-id=/godot_recipes/2d/2d_align_surface/ title="KinematicBody2D: align with surface" class=dd-item><a href=/godot_recipes/2d/2d_align_surface/>KinematicBody2D: align with surface</a></li><li data-nav-id=/godot_recipes/2d/moving_platforms/ title="Moving Platforms" class=dd-item><a href=/godot_recipes/2d/moving_platforms/>Moving Platforms</a></li><li data-nav-id=/godot_recipes/2d/2d_shooting/ title="Shooting projectiles" class=dd-item><a href=/godot_recipes/2d/2d_shooting/>Shooting projectiles</a></li><li data-nav-id=/godot_recipes/2d/tilemap_animation/ title="TileMap: animated tiles" class=dd-item><a href=/godot_recipes/2d/tilemap_animation/>TileMap: animated tiles</a></li><li data-nav-id=/godot_recipes/2d/screen_shake/ title="Screen Shake" class=dd-item><a href=/godot_recipes/2d/screen_shake/>Screen Shake</a></li><li data-nav-id=/godot_recipes/2d/multi_target_camera/ title="Multitarget Camera" class=dd-item><a href=/godot_recipes/2d/multi_target_camera/>Multitarget Camera</a></li><li data-nav-id=/godot_recipes/2d/ballistic_bullet/ title="Ballistic bullet" class=dd-item><a href=/godot_recipes/2d/ballistic_bullet/>Ballistic bullet</a></li><li data-nav-id=/godot_recipes/2d/touchscreen_camera/ title="Touchscreen Camera" class=dd-item><a href=/godot_recipes/2d/touchscreen_camera/>Touchscreen Camera</a></li><li data-nav-id=/godot_recipes/2d/2d_draw_trajectory/ title="Draw trajectory" class=dd-item><a href=/godot_recipes/2d/2d_draw_trajectory/>Draw trajectory</a></li></ul></li><li data-nav-id=/godot_recipes/3d/ title=3D class=dd-item><a href=/godot_recipes/3d/><i class="fas fa-cube fa-fw"></i>&nbsp3D
          
     </a><ul><li data-nav-id=/godot_recipes/3d/camera_gimbal/ title="Camera Gimbal" class=dd-item><a href=/godot_recipes/3d/camera_gimbal/>Camera Gimbal</a></li><li data-nav-id=/godot_recipes/3d/interpolated_camera/ title="Interpolated Camera" class=dd-item><a href=/godot_recipes/3d/interpolated_camera/>Interpolated Camera</a></li><li data-nav-id=/godot_recipes/3d/kinematic_body/ title="KinematicBody: Movement" class=dd-item><a href=/godot_recipes/3d/kinematic_body/>KinematicBody: Movement</a></li><li data-nav-id=/godot_recipes/3d/healthbars/ title="3D Unit Healthbars" class=dd-item><a href=/godot_recipes/3d/healthbars/>3D Unit Healthbars</a></li><li data-nav-id=/godot_recipes/3d/3d_shooting/ title="Shooting projectiles" class=dd-item><a href=/godot_recipes/3d/3d_shooting/>Shooting projectiles</a></li><li data-nav-id=/godot_recipes/3d/simple_airplane/ title="Simplified Airplane Controller" class=dd-item><a href=/godot_recipes/3d/simple_airplane/>Simplified Airplane Controller</a></li><li data-nav-id=/godot_recipes/3d/spaceship/ title="Arcade-style Spaceship" class=dd-item><a href=/godot_recipes/3d/spaceship/>Arcade-style Spaceship</a></li><li data-nav-id=/godot_recipes/3d/debug_overlay/ title="Drawing Vectors in 3D" class=dd-item><a href=/godot_recipes/3d/debug_overlay/>Drawing Vectors in 3D</a></li><li data-nav-id=/godot_recipes/3d/click_to_move/ title="Click to move" class=dd-item><a href=/godot_recipes/3d/click_to_move/>Click to move</a></li><li data-nav-id=/godot_recipes/3d/3d_sphere_car/ title="Quick Arcade-style Car" class=dd-item><a href=/godot_recipes/3d/3d_sphere_car/>Quick Arcade-style Car</a></li><li data-nav-id=/godot_recipes/3d/rotate_interpolate/ title="Smooth rotation" class=dd-item><a href=/godot_recipes/3d/rotate_interpolate/>Smooth rotation</a></li><li data-nav-id=/godot_recipes/3d/3d_align_surface/ title="KinematicBody: align with surface" class=dd-item><a href=/godot_recipes/3d/3d_align_surface/>KinematicBody: align with surface</a></li><li data-nav-id=/godot_recipes/3d/kinematic_car/ title="3D Kinematic Car" class=dd-item><a href=/godot_recipes/3d/kinematic_car/><i class="fas fa-car"></i>&nbsp3D Kinematic Car
          </a><ul><li data-nav-id=/godot_recipes/3d/kinematic_car/car_base/ title="3D Kinematic Car: Base" class=dd-item><a href=/godot_recipes/3d/kinematic_car/car_base/>3D Kinematic Car: Base</a></li><li data-nav-id=/godot_recipes/3d/kinematic_car/car_traction/ title="3D Kinematic Car: Traction/Drifting" class=dd-item><a href=/godot_recipes/3d/kinematic_car/car_traction/>3D Kinematic Car: Traction/Drifting</a></li><li data-nav-id=/godot_recipes/3d/kinematic_car/car_camera/ title="3D Kinematic Car: Chase Camera" class=dd-item><a href=/godot_recipes/3d/kinematic_car/car_camera/>3D Kinematic Car: Chase Camera</a></li><li data-nav-id=/godot_recipes/3d/kinematic_car/car_slopes/ title="3D Kinematic Car: Slopes & Ramps" class=dd-item><a href=/godot_recipes/3d/kinematic_car/car_slopes/>3D Kinematic Car: Slopes & Ramps</a></li></ul></li></ul></li><li data-nav-id=/godot_recipes/input/ title=Input class=dd-item><a href=/godot_recipes/input/><i class="fas fa-gamepad fa-fw"></i>&nbspInput
          
     </a><ul><li data-nav-id=/godot_recipes/input/input_actions/ title="Input Actions" class=dd-item><a href=/godot_recipes/input/input_actions/>Input Actions</a></li><li data-nav-id=/godot_recipes/input/mouse_input/ title="Mouse Input" class=dd-item><a href=/godot_recipes/input/mouse_input/>Mouse Input</a></li><li data-nav-id=/godot_recipes/input/custom_actions/ title="Adding Input Actions in code" class=dd-item><a href=/godot_recipes/input/custom_actions/>Adding Input Actions in code</a></li><li data-nav-id=/godot_recipes/input/mouse_capture/ title="Capturing the Mouse" class=dd-item><a href=/godot_recipes/input/mouse_capture/>Capturing the Mouse</a></li><li data-nav-id=/godot_recipes/input/custom_mouse_cursor/ title="Customizing the Mouse Cursor" class=dd-item><a href=/godot_recipes/input/custom_mouse_cursor/>Customizing the Mouse Cursor</a></li><li data-nav-id=/godot_recipes/input/multi_unit_select/ title="Mouse: Drag-select multiple units" class=dd-item><a href=/godot_recipes/input/multi_unit_select/>Mouse: Drag-select multiple units</a></li></ul></li><li data-nav-id=/godot_recipes/animation/ title=Animation class=dd-item><a href=/godot_recipes/animation/><i class="fas fa-film fa-fw"></i>&nbspAnimation
          
     </a><ul><li data-nav-id=/godot_recipes/animation/spritesheet_animation/ title="Spritesheet animation" class=dd-item><a href=/godot_recipes/animation/spritesheet_animation/>Spritesheet animation</a></li><li data-nav-id=/godot_recipes/animation/melee_attacks/ title="Melee attacks" class=dd-item><a href=/godot_recipes/animation/melee_attacks/>Melee attacks</a></li><li data-nav-id=/godot_recipes/animation/animation_state_machine/ title="Controlling animation states" class=dd-item><a href=/godot_recipes/animation/animation_state_machine/>Controlling animation states</a></li></ul></li><li data-nav-id=/godot_recipes/ui/ title=UI class=dd-item><a href=/godot_recipes/ui/><i class="far fa-window-maximize fa-fw"></i>&nbspUI
          
     </a><ul><li data-nav-id=/godot_recipes/ui/labels/ title=Labels class=dd-item><a href=/godot_recipes/ui/labels/>Labels</a></li><li data-nav-id=/godot_recipes/ui/containers/ title=Containers class=dd-item><a href=/godot_recipes/ui/containers/>Containers</a></li><li data-nav-id=/godot_recipes/ui/cooldown_button/ title="Cooldown Button" class=dd-item><a href=/godot_recipes/ui/cooldown_button/>Cooldown Button</a></li><li data-nav-id=/godot_recipes/ui/heart_containers_3/ title="Heart Containers: 3 Ways" class=dd-item><a href=/godot_recipes/ui/heart_containers_3/>Heart Containers: 3 Ways</a></li><li data-nav-id=/godot_recipes/ui/debug_overlay/ title="Displaying debug data" class=dd-item><a href=/godot_recipes/ui/debug_overlay/>Displaying debug data</a></li><li data-nav-id=/godot_recipes/ui/unit_healthbar/ title="Object Healthbars" class=dd-item><a href=/godot_recipes/ui/unit_healthbar/>Object Healthbars</a></li><li data-nav-id=/godot_recipes/ui/floating_text/ title="Floating combat text" class=dd-item><a href=/godot_recipes/ui/floating_text/>Floating combat text</a></li><li data-nav-id=/godot_recipes/ui/minimap/ title=Minimap/radar class=dd-item><a href=/godot_recipes/ui/minimap/>Minimap/radar</a></li><li data-nav-id=/godot_recipes/ui/radial_menu/ title="Radial Popup Menu" class=dd-item><a href=/godot_recipes/ui/radial_menu/>Radial Popup Menu</a></li></ul></li><li data-nav-id=/godot_recipes/math/ title="Gamedev Math" class=dd-item><a href=/godot_recipes/math/><i class="fas fa-rocket fa-fw"></i>&nbspGamedev Math
          
   </a><ul><li data-nav-id=/godot_recipes/math/interpolation/ title=Interpolation class=dd-item><a href=/godot_recipes/math/interpolation/>Interpolation</a></li><li data-nav-id=/godot_recipes/math/transforms/ title=Transforms class=dd-item><a href=/godot_recipes/math/transforms/>Transforms</a></li><li data-nav-id=/godot_recipes/math/noise/ title=Noise class=dd-item><a href=/godot_recipes/math/noise/>Noise</a></li><li data-nav-id=/godot_recipes/math/dot_cross_product/ title="Vectors: Using Dot and Cross Product" class=dd-item><a href=/godot_recipes/math/dot_cross_product/>Vectors: Using Dot and Cross Product</a></li></ul></li><li data-nav-id=/godot_recipes/recipes/ title=Misc class=dd-item><a href=/godot_recipes/recipes/><i class="fas fa-box-open"></i>&nbspMisc
          
     </a><ul><li data-nav-id=/godot_recipes/recipes/godot3_inheritance/ title=Inheritance class=dd-item><a href=/godot_recipes/recipes/godot3_inheritance/>Inheritance</a></li></ul></li><li data-nav-id=/godot_recipes/physics/ title=Physics class=dd-item><a href=/godot_recipes/physics/><i class="fas fa-atom fa-fw"></i>&nbspPhysics
          
     </a><ul><li data-nav-id=/godot_recipes/physics/godot3_kinematic2d/ title="Using KinematicBody2D" class=dd-item><a href=/godot_recipes/physics/godot3_kinematic2d/>Using KinematicBody2D</a></li><li data-nav-id=/godot_recipes/physics/godot3_kyn_rigidbody1/ title="Using Rigid Bodies" class=dd-item><a href=/godot_recipes/physics/godot3_kyn_rigidbody1/>Using Rigid Bodies</a></li><li data-nav-id=/godot_recipes/physics/kinematic_friction/ title="Kinematic Friction" class=dd-item><a href=/godot_recipes/physics/kinematic_friction/>Kinematic Friction</a></li><li data-nav-id=/godot_recipes/physics/rigidbody_drag_drop/ title="RigidBody2D: Drag and Drop" class=dd-item><a href=/godot_recipes/physics/rigidbody_drag_drop/>RigidBody2D: Drag and Drop</a></li><li data-nav-id=/godot_recipes/physics/kinematic_to_rigidbody/ title="Kinematic to Rigid Body Interaction" class=dd-item><a href=/godot_recipes/physics/kinematic_to_rigidbody/>Kinematic to Rigid Body Interaction</a></li><li data-nav-id=/godot_recipes/physics/joints_2d/ title="Using 2D Joints" class=dd-item><a href=/godot_recipes/physics/joints_2d/>Using 2D Joints</a></li><li data-nav-id=/godot_recipes/physics/conveyor_belt/ title="Conveyor Belt" class=dd-item><a href=/godot_recipes/physics/conveyor_belt/>Conveyor Belt</a></li></ul></li><li data-nav-id=/godot_recipes/ai/ title=AI/Behavior class="dd-item
parent"><a href=/godot_recipes/ai/><i class="fas fa-project-diagram fa-fw"></i>&nbspAI/Behavior
          
    </a><ul><li data-nav-id=/godot_recipes/ai/chase/ title="Chasing the player" class=dd-item><a href=/godot_recipes/ai/chase/>Chasing the player</a></li><li data-nav-id=/godot_recipes/ai/path_follow/ title="Path following" class=dd-item><a href=/godot_recipes/ai/path_follow/>Path following</a></li><li data-nav-id=/godot_recipes/ai/changing_behaviors/ title="Changing behaviors" class=dd-item><a href=/godot_recipes/ai/changing_behaviors/>Changing behaviors</a></li><li data-nav-id=/godot_recipes/ai/homing_missile/ title="Homing missile" class=dd-item><a href=/godot_recipes/ai/homing_missile/>Homing missile</a></li><li data-nav-id=/godot_recipes/ai/context_map/ title="Context-based steering" class="dd-item active"><a href=/godot_recipes/ai/context_map/>Context-based steering</a></li></ul></li><li data-nav-id=/godot_recipes/shaders/ title=Shaders class=dd-item><a href=/godot_recipes/shaders/><i class="fas fa-draw-polygon fa-fw"></i>&nbspShaders
          
     </a><ul><li data-nav-id=/godot_recipes/shaders/intro/ title="Shaders: intro" class=dd-item><a href=/godot_recipes/shaders/intro/>Shaders: intro</a></li><li data-nav-id=/godot_recipes/shaders/interacting/ title="Interacting with Shaders" class=dd-item><a href=/godot_recipes/shaders/interacting/>Interacting with Shaders</a></li><li data-nav-id=/godot_recipes/shaders/greyscale/ title="Greyscale (monochrome) shader" class=dd-item><a href=/godot_recipes/shaders/greyscale/>Greyscale (monochrome) shader</a></li><li data-nav-id=/godot_recipes/shaders/blur/ title="Blur shader" class=dd-item><a href=/godot_recipes/shaders/blur/>Blur shader</a></li></ul></li><li data-nav-id=/godot_recipes/audio/ title=Audio class=dd-item><a href=/godot_recipes/audio/><i class="fas fa-volume-up fa-fw"></i>&nbspAudio
          
     </a><ul><li data-nav-id=/godot_recipes/audio/audio_manager/ title="Audio Manager" class=dd-item><a href=/godot_recipes/audio/audio_manager/>Audio Manager</a></li></ul></li><li data-nav-id=/godot_recipes/export/ title=Exporting class=dd-item><a href=/godot_recipes/export/><i class="fas fa-file-export fa-fw"></i>&nbspExporting
          
     </a></li><li data-nav-id=/godot_recipes/games/ title="Game Tutorials" class=dd-item><a href=/godot_recipes/games/><i class="fas fa-chess-pawn fa-fw"></i>&nbspGame Tutorials
          
 </a><ul><li data-nav-id=/godot_recipes/games/circle_jump/ title="Mobile Game: Circle Jump" class=dd-item><a href=/godot_recipes/games/circle_jump/><i class="far fa-circle fa-fw"></i>&nbspMobile Game: Circle Jump
   </a><ul><li data-nav-id=/godot_recipes/games/circle_jump/circle_jump_01/ title="Project setup" class=dd-item><a href=/godot_recipes/games/circle_jump/circle_jump_01/>01. Project setup</a></li><li data-nav-id=/godot_recipes/games/circle_jump/circle_jump_02/ title="Spawning Circles" class=dd-item><a href=/godot_recipes/games/circle_jump/circle_jump_02/>02. Spawning Circles</a></li><li data-nav-id=/godot_recipes/games/circle_jump/circle_jump_03/ title="Limited circles" class=dd-item><a href=/godot_recipes/games/circle_jump/circle_jump_03/>03. Limited circles</a></li><li data-nav-id=/godot_recipes/games/circle_jump/circle_jump_04/ title=Menus class=dd-item><a href=/godot_recipes/games/circle_jump/circle_jump_04/>04. Menus</a></li><li data-nav-id=/godot_recipes/games/circle_jump/circle_jump_05/ title="Score and HUD" class=dd-item><a href=/godot_recipes/games/circle_jump/circle_jump_05/>05. Score and HUD</a></li><li data-nav-id=/godot_recipes/games/circle_jump/circle_jump_06/ title="Sound and Colors" class=dd-item><a href=/godot_recipes/games/circle_jump/circle_jump_06/>06. Sound and Colors</a></li><li data-nav-id=/godot_recipes/games/circle_jump/circle_jump_07/ title="Moving circles" class=dd-item><a href=/godot_recipes/games/circle_jump/circle_jump_07/>07. Moving circles</a></li><li data-nav-id=/godot_recipes/games/circle_jump/circle_jump_11/ title="Mobile ads" class=dd-item><a href=/godot_recipes/games/circle_jump/circle_jump_11/>11. Mobile ads</a></li><li data-nav-id=/godot_recipes/games/circle_jump/circle_jump_12/ title="Saving settings" class=dd-item><a href=/godot_recipes/games/circle_jump/circle_jump_12/>12. Saving settings</a></li></ul></li></ul></li></ul><section id=footer><p align=center><a href=https://github.com/kidscancode/godot_lessons><i class="fab fa-github-square fa-3x"></i></a><a href=https://www.youtube.com/c/KidsCanCodeOrg><i class="fab fa-youtube-square fa-3x"></i></a><a href=http://twitter.com/KidsCanCode><i class="fab fa-twitter-square fa-3x"></i></a><a href=https://discord.gg/bFTqjfdgDz><i class="fab fa-discord fa-3x"></i></a></p><p align=center><i class="far fa-copyright"></i>&nbsp;2019-2021 KidsCanCode</p></section></div></nav><section id=body><div id=overlay></div><div class="padding highlightable"><div><div id=top-bar><div id=breadcrumbs itemscope itemtype=http://data-vocabulary.org/Breadcrumb><span id=sidebar-toggle-span><a href=# id=sidebar-toggle data-sidebar-toggle><i class="fas fa-bars"></i></a></span><span id=toc-menu><i class="fas fa-list-alt"></i></span><span class=links><a href=/godot_recipes/>Home</a> > <a href=/godot_recipes/ai/>AI/Behavior</a> > Context-based steering</span></div><div class=progress><div class=wrapper><nav id=TableOfContents><ul><li><a href=#problem>Problem</a></li><li><a href=#solution>Solution</a><ul><li><a href=#the-algorithm>The Algorithm</a></li><li><a href=#finding-interest>Finding Interest</a></li><li><a href=#the-code>The Code</a></li><li><a href=#example-in-practice>Example in Practice</a></li><li><a href=#wrapping-up>Wrapping up</a></li></ul></li><li><a href=#related-recipes>Related recipes</a><ul><li></li></ul></li></ul></nav></div></div></div></div><div id=head-tags></div><div id=body-inner><h1>Context-based steering</h1><h2 id=problem>Problem</h2><p>You need an AI-controlled object in your game that can follow a path, avoid obstacles, and make other decisions about how to move around the world.</p><h2 id=solution>Solution</h2><p>&ldquo;Steering behavior&rdquo; is the blanket term for a variety of algorithms that you can use to solve this problem. Which one you choose will depend on your game, the type of world the object lives in, and what type of &ldquo;intelligence&rdquo; you want it to have.</p><p>In this example, we&rsquo;re going to use a method called &ldquo;Context Behavior&rdquo;, which aims to give the object enough information about the world to make a choice of how to move. For additional reading on this subject, see the following links:</p><ul><li><p><a href=https://andrewfray.wordpress.com/2013/03/26/context-behaviours-know-how-to-share/>Andrew Fray: Context Behaviours Know How to Share</a></p></li><li><p><a href=https://jameskeats.com/portfolio/contextbhvr.html>James Keats: AI Context Behaviors</a></p></li></ul><p>For this demo, we&rsquo;ll use a generic &ldquo;Agent&rdquo; object. In your game, this might be a car driving around a track, a monster patrolling a dungeon, or some other kind of game entity. Our agent will use a <i class=gd-KinematicBody2D></i><code>KinematicBody2D</code>, but remember, you can use this technique with any kind of object - the algorithm is about the entity choosing a direction to move, how it moves is entirely separate.</p><h3 id=the-algorithm>The Algorithm</h3><p>To begin, let&rsquo;s imagine our agent has a number of rays extending in all directions (we&rsquo;ll talk about how many to use later - for now let&rsquo;s use 8).</p><p><img src=/godot_recipes/img/ai_context_01.png alt=alt></p><p>In our agent&rsquo;s script, we&rsquo;ll store an array called <code>interest</code>, tracking in which directions the agent wants to go.</p><p><img src=/godot_recipes/img/ai_context_04.png alt=alt></p><p>Of course, if they&rsquo;re all the same, then it can&rsquo;t move - it wants to go in all directions equally! So lets consider that it has a preference - it mostly wants to go forward:</p><p><img src=/godot_recipes/img/ai_context_03.png alt=alt></p><p>In this case, the <code>interest</code> array would look like this:</p><p><img src=/godot_recipes/img/ai_context_05.png alt=alt></p><p>The strongest desire is to go forward, but forward-left and forward-right are acceptible as well. But what if an obstacle appears?</p><p><img src=/godot_recipes/img/ai_context_06.png alt=alt></p><p>Now we&rsquo;ll introduce a second array, <code>danger</code>, that indicates directions that are not preferred.</p><p><img src=/godot_recipes/img/ai_context_07.png alt=alt></p><p>Combining these two arrays, we can eliminate any <code>interest</code> directions that are also contained in <code>danger</code>. By summing up the remaining <code>interest</code> directions, we&rsquo;re left with a new direction pointing away from the obstacle.</p><p><img src=/godot_recipes/img/ai_context_08.png alt=alt></p><p>To summarize:</p><ol><li>Find the object&rsquo;s <code>interest</code> directions.</li><li>Find the directions that contain <code>danger</code>.</li><li>Eliminate any <code>interest</code> directions that are dangerous.</li><li>Sum the remaining <code>interest</code> directions to find the new heading.</li></ol><h3 id=finding-interest>Finding Interest</h3><p>This will vary depending on what your agent&rsquo;s goal is. If it&rsquo;s to chase the player, then the <code>interest</code> values should be high in the direction of the player. You can even have multiple targets: closer goals have higher interest, but if an obstacle cancels them out, the lower scoring goals will win.</p><p>For this demo, we&rsquo;re going to imagine we&rsquo;re making a racing game of some kind. The AI-controlled cars need to make it around the track: their <code>interest</code> array should be pointing forward along the track, so they don&rsquo;t start going backwards.</p><p>There are a few ways to do this, and in order to keep our agents from needing to know the implementation details, we&rsquo;ll have the track <em>tell</em> them which way to go based on their position. At any time if you ask the track which way is correct, it will tell you.</p><h3 id=the-code>The Code</h3><p>Here&rsquo;s the code for our agent. We start with the exported values: movement parameters and other values we want to be able to adjust easily. <code>look_ahead</code>, for example, is how far ahead the <code>danger</code> rays will detect obstacles.</p><p>Note that we&rsquo;ve made the <code>num_rays</code> adjustable, so that you can find the number that works best for your situation. We&rsquo;ll talk below about the tradeoffs and benefits of larger numbers of rays.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-gdscript data-lang=gdscript><span style=color:#ff79c6>extends</span> KinematicBody2D

<span style=color:#ff79c6>export</span> <span style=color:#ff79c6>var</span> max_speed <span style=color:#ff79c6>=</span> <span style=color:#bd93f9>350</span>
<span style=color:#ff79c6>export</span> <span style=color:#ff79c6>var</span> steer_force <span style=color:#ff79c6>=</span> <span style=color:#bd93f9>0.1</span>
<span style=color:#ff79c6>export</span> <span style=color:#ff79c6>var</span> look_ahead <span style=color:#ff79c6>=</span> <span style=color:#bd93f9>100</span>
<span style=color:#ff79c6>export</span> <span style=color:#ff79c6>var</span> num_rays <span style=color:#ff79c6>=</span> <span style=color:#bd93f9>8</span>

<span style=color:#6272a4># context array</span>
<span style=color:#ff79c6>var</span> ray_directions <span style=color:#ff79c6>=</span> []
<span style=color:#ff79c6>var</span> interest <span style=color:#ff79c6>=</span> []
<span style=color:#ff79c6>var</span> danger <span style=color:#ff79c6>=</span> []

<span style=color:#ff79c6>var</span> chosen_dir <span style=color:#ff79c6>=</span> Vector2<span style=color:#ff79c6>.</span>ZERO
<span style=color:#ff79c6>var</span> velocity <span style=color:#ff79c6>=</span> Vector2<span style=color:#ff79c6>.</span>ZERO
<span style=color:#ff79c6>var</span> acceleration <span style=color:#ff79c6>=</span> Vector2<span style=color:#ff79c6>.</span>ZERO
</code></pre></div><p>Next, we have <code>_ready()</code> where we size the arrays properly and populate the <code>ray_directions</code> array with the actual ray vectors, distributing them evenly around the circle based on <code>num_rays</code>. We begin with no rotation, so <code>Vector2.RIGHT</code> is forward.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-gdscript data-lang=gdscript><span style=color:#ff79c6>func</span> _ready():
    interest<span style=color:#ff79c6>.</span>resize(num_rays)
    danger<span style=color:#ff79c6>.</span>resize(num_rays)
    ray_directions<span style=color:#ff79c6>.</span>resize(num_rays)
    <span style=color:#ff79c6>for</span> i <span style=color:#ff79c6>in</span> num_rays:
        <span style=color:#ff79c6>var</span> angle <span style=color:#ff79c6>=</span> i <span style=color:#ff79c6>*</span> <span style=color:#bd93f9>2</span> <span style=color:#ff79c6>*</span> PI <span style=color:#ff79c6>/</span> num_rays
        ray_directions[i] <span style=color:#ff79c6>=</span> Vector2<span style=color:#ff79c6>.</span>RIGHT<span style=color:#ff79c6>.</span>rotated(angle)
</code></pre></div><p>In <code>_physics_process()</code> we&rsquo;ll populate the context arrays and execute the movement. Note we&rsquo;ve broken the steps of the algorithm in to separate functions. Once we&rsquo;ve found our chosen direction, we turn towards it as much as possible (based on <code>steer_force</code>) and move.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-gdscript data-lang=gdscript><span style=color:#ff79c6>func</span> _physics_process(delta):
    set_interest()
    set_danger()
    choose_direction()
    <span style=color:#ff79c6>var</span> desired_velocity <span style=color:#ff79c6>=</span> chosen_dir<span style=color:#ff79c6>.</span>rotated(rotation) <span style=color:#ff79c6>*</span> max_speed
    velocity <span style=color:#ff79c6>=</span> velocity<span style=color:#ff79c6>.</span>linear_interpolate(desired_velocity, steer_force)
    rotation <span style=color:#ff79c6>=</span> velocity<span style=color:#ff79c6>.</span>angle()
    move_and_collide(velocity <span style=color:#ff79c6>*</span> delta)
</code></pre></div><p>Now we&rsquo;ll go over the 3 functions that make up the algorithm. first, setting the <code>interest</code> array. As mentioned above, we&rsquo;re going to ask the world (our <code>owner</code> in this case) to tell us which direction we should be trying to go.</p><p>Using each ray direction, we take the <em>dot product</em> with the given path direction. Recall that the dot product of two aligned vectors is <code>1</code> and for two perpendicular vectors it&rsquo;s <code>0</code>. We ignore negative values - 0 means we don&rsquo;t want to go that way.</p><p>For example, with 32 rays, the <code>interest</code> would look like this:</p><p><img src=/godot_recipes/img/ai_context_09.png alt=alt></p><p>As a safety measure, if there&rsquo;s no owner to tell us a direction, we&rsquo;ll default to trying to go forward.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-gdscript data-lang=gdscript><span style=color:#ff79c6>func</span> set_interest():
    <span style=color:#6272a4># Set interest in each slot based on world direction</span>
    <span style=color:#ff79c6>if</span> owner <span style=color:#ff79c6>and</span> owner<span style=color:#ff79c6>.</span>has_method(<span style=color:#f1fa8c>&#34;get_path_direction&#34;</span>):
        <span style=color:#ff79c6>var</span> path_direction <span style=color:#ff79c6>=</span> owner<span style=color:#ff79c6>.</span>get_path_direction(position)
        <span style=color:#ff79c6>for</span> i <span style=color:#ff79c6>in</span> num_rays:
            <span style=color:#ff79c6>var</span> d <span style=color:#ff79c6>=</span> ray_directions[i]<span style=color:#ff79c6>.</span>rotated(rotation)<span style=color:#ff79c6>.</span>dot(path_direction)
            interest[i] <span style=color:#ff79c6>=</span> <span style=color:#8be9fd;font-style:italic>max</span>(<span style=color:#bd93f9>0</span>, d)
    <span style=color:#6272a4># If no world path, use default interest</span>
    <span style=color:#ff79c6>else</span>:
        set_default_interest()

<span style=color:#ff79c6>func</span> set_default_interest():
    <span style=color:#6272a4># Default to moving forward</span>
    <span style=color:#ff79c6>for</span> i <span style=color:#ff79c6>in</span> num_rays:
        <span style=color:#ff79c6>var</span> d <span style=color:#ff79c6>=</span> ray_directions[i]<span style=color:#ff79c6>.</span>rotated(rotation)<span style=color:#ff79c6>.</span>dot(transform<span style=color:#ff79c6>.</span>x)
        interest[i] <span style=color:#ff79c6>=</span> <span style=color:#8be9fd;font-style:italic>max</span>(<span style=color:#bd93f9>0</span>, d)
</code></pre></div><p>Now we can populate the <code>danger</code> array. Using the <code>Physics2DDirectSpaceState</code>, we cast a ray in each direction. If there&rsquo;s a hit, we add a <code>1</code> in that spot.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-gdscript data-lang=gdscript><span style=color:#ff79c6>func</span> set_danger():
    <span style=color:#6272a4># Cast rays to find danger directions</span>
    <span style=color:#ff79c6>var</span> space_state <span style=color:#ff79c6>=</span> get_world_2d()<span style=color:#ff79c6>.</span>direct_space_state
    <span style=color:#ff79c6>for</span> i <span style=color:#ff79c6>in</span> num_rays:
        <span style=color:#ff79c6>var</span> result <span style=color:#ff79c6>=</span> space_state<span style=color:#ff79c6>.</span>intersect_ray(position,
                position <span style=color:#ff79c6>+</span> ray_directions[i]<span style=color:#ff79c6>.</span>rotated(rotation) <span style=color:#ff79c6>*</span> look_ahead,
                [self])
        danger[i] <span style=color:#ff79c6>=</span> <span style=color:#bd93f9>1.0</span> <span style=color:#ff79c6>if</span> result <span style=color:#ff79c6>else</span> <span style=color:#bd93f9>0.0</span>
</code></pre></div><p>Finally, we can use the context arrays to choose our direction. Looping through the <code>danger</code> array, zero the <code>interest</code> wherever there&rsquo;s danger. Then, sum up and normalize the remaining interest vectors.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-gdscript data-lang=gdscript><span style=color:#ff79c6>func</span> choose_direction():
    <span style=color:#6272a4># Eliminate interest in slots with danger</span>
    <span style=color:#ff79c6>for</span> i <span style=color:#ff79c6>in</span> num_rays:
        <span style=color:#ff79c6>if</span> danger[i] <span style=color:#ff79c6>&gt;</span> <span style=color:#bd93f9>0.0</span>:
            interest[i] <span style=color:#ff79c6>=</span> <span style=color:#bd93f9>0.0</span>
    <span style=color:#6272a4># Choose direction based on remaining interest</span>
    chosen_dir <span style=color:#ff79c6>=</span> Vector2<span style=color:#ff79c6>.</span>ZERO
    <span style=color:#ff79c6>for</span> i <span style=color:#ff79c6>in</span> num_rays:
        chosen_dir <span style=color:#ff79c6>+=</span> ray_directions[i] <span style=color:#ff79c6>*</span> interest[i]
    chosen_dir <span style=color:#ff79c6>=</span> chosen_dir<span style=color:#ff79c6>.</span>normalized()
</code></pre></div><h3 id=example-in-practice>Example in Practice</h3><p>Let&rsquo;s try it out in action! Here, we&rsquo;ve created a track using a <i class=gd-Path2D></i><code>Path2D</code> and some collision polygons.</p><p><img src=/godot_recipes/img/ai_context_11.png alt=alt></p><p>In the script for this scene, we have a <code>get_path_direction()</code> function. Given a position, this function finds the closest point on the path and puts the <code>PathFollow2D</code> there in order to find the forward direction.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-gdscript data-lang=gdscript><span style=color:#ff79c6>func</span> get_path_direction(pos):
    <span style=color:#ff79c6>var</span> offset <span style=color:#ff79c6>=</span> path<span style=color:#ff79c6>.</span>curve<span style=color:#ff79c6>.</span>get_closest_offset(pos)
    path_follow<span style=color:#ff79c6>.</span>offset <span style=color:#ff79c6>=</span> offset
    <span style=color:#ff79c6>return</span> path_follow<span style=color:#ff79c6>.</span>transform<span style=color:#ff79c6>.</span>x
</code></pre></div><p>We&rsquo;ve randomized the speeds of the agents do get some variety. Notice how the fast one finds ways to dodge around the slow ones.</p><p><img src=/godot_recipes/img/ai_context_10.gif alt=alt></p><h3 id=wrapping-up>Wrapping up</h3><p>This method is very flexible and can be extended to produce a wide variety of complex-looking behaviors. It</p><p>Here are some additional suggestions for adaptations/improvements:</p><ul><li>Levels of danger</li></ul><p>When populating the <code>danger</code> array, don&rsquo;t just use <code>0</code> or <code>1</code>, but instead calculate a danger &ldquo;score&rdquo; based on the distance of the object. Then subtract that amount from the <code>interest</code> rather than removing it. Far away objects will have a small impact while close ones will have more.</p><ul><li>Avoidance</li></ul><p>Rather than a danger item canceling the interest, it could <em>add</em> to the interest in the opposite direction.</p><h2 id=related-recipes>Related recipes</h2><ul><li><a href=/godot_recipes/math/dot_cross_product/>Vectors: Using Dot and Cross Product</a></li></ul><h4 id=like-video>Like video?</h4><div style=position:relative;padding-bottom:56.25%;height:0;overflow:hidden><iframe src=https://www.youtube.com/embed/dzqtF_CmX-I style=position:absolute;top:0;left:0;width:100%;height:100%;border:0 allowfullscreen title="YouTube Video"></iframe></div><h3>Comments</h3><div id=gh-comments><br><br><div id=gh-comments-list></div><a href=javascript:void(0) id=gh-load-comments class=btn style=display:none>Load more comments</a></div><script type=text/javascript src=/godot_recipes/js/github-comments.js></script><script type=text/javascript>DoGithubComments(75);</script><footer class=footline></footer></div></div><div id=navigation></div></section><div style=left:-1000px;overflow:scroll;position:absolute;top:-1000px;border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px><div style=border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px></div></div><script src=/godot_recipes/js/clipboard.min.js?1624146714></script><script src=/godot_recipes/js/perfect-scrollbar.min.js?1624146714></script><script src=/godot_recipes/js/perfect-scrollbar.jquery.min.js?1624146714></script><script src=/godot_recipes/js/jquery.sticky.js?1624146714></script><script src=/godot_recipes/js/featherlight.min.js?1624146714></script><script src=/godot_recipes/js/html5shiv-printshiv.min.js?1624146714></script><script src=/godot_recipes/js/highlight.pack.js?1624146714></script><script>hljs.initHighlightingOnLoad();</script><script src=/godot_recipes/js/modernizr.custom-3.6.0.js?1624146714></script><script src=/godot_recipes/js/learn.js?1624146714></script><script src=/godot_recipes/js/hugo-learn.js?1624146714></script><link href=/godot_recipes/mermaid/mermaid.css?1624146714 type=text/css rel=stylesheet><script src=/godot_recipes/mermaid/mermaid.js?1624146714></script><script>mermaid.initialize({startOnLoad:true});</script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-39851424-1','auto');ga('send','pageview');}</script></body></html>